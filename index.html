<!doctype html><html><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Tugas Buzzer</title>
<style>
body{font-family:system-ui,Arial;padding:16px;max-width:720px;margin:auto;}
.card{border:1px solid #ddd;border-radius:12px;padding:16px;margin:12px 0;}
.btn{padding:10px 14px;border-radius:10px;border:1px solid #444;cursor:pointer;background:#111;color:#fff;}
</style>
</head><body>
<h1>🎯 Tugas Hari Ini</h1>
<div id="list"></div>

<script src="api.js"></script>
<script>
(async function(){
  const box = document.getElementById('list');
  try {
    const res = await API.listCampaigns();
    console.log('API response:', res);
    if (!res.ok) { box.textContent = '❌ API error: ' + (res.error || 'unknown'); return; }
    if (!res.data || res.data.length === 0) { box.textContent = '📭 Belum ada kampanye aktif.'; return; }
    box.innerHTML = res.data.map(c=>`
      <div class="card">
        <div><b>${c.name||'(tanpa nama)'}</b> — <small>${(c.platform||'').toUpperCase()}</small></div>
        <div>${c.description||''}</div>
        <div><small>${c.total_links||0} link</small></div>
        <a class="btn" href="campaign.html?campaign_id=${encodeURIComponent(c.campaign_id)}">Kerjakan</a>
      </div>
    `).join('');
  } catch (err) {
    box.textContent = '❌ Fetch gagal: ' + err.message;
  }
})();
</script>
</body></html>
